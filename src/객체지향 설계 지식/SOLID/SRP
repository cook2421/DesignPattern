SRP (Single Responsibility Principle, 단일 책임 원칙)



<책임의 의미>
1. 책임의 기본 단위 : '객체'

2. 책임 = 해야 하는 것
   책임 = 할 수 있는 것
   책임 = '해야 하는 것을 잘 할 수 있는 것'



<변경>
3. 어떤 클래스가 잘 설계되었는지 판단하려면 언제 변경되어야 하는지 물어보면 된다.
   '책임 = 변경 이유'

4. 책임을 많이 질수록 클래스 내부에서 서로 다른 역할을 수행하는 코드끼리
   강하게 결합될 가능성이 높아진다.



<책임 분리>
5. Student 클래스는 여러 책임을 수행하므로 Student 클래스의 도움을 필요로 하는
   코드도 많을 수밖에 없다.

6. 이런 이유 때문에 Student 클래스에 변경사항이 생기면 Student 클래스를 사용하는 코드와
   전혀 관계가 없더라도 직접 또는 간접적으로 사용하는 모든 코드를 다시 테스트해야 한다.

7. 이와 같이 어떤 변화가 있을 때 해당 변화가 기존 시스템의 기능에 영향을 주는지 평가하는
   테스트를 회귀(regression) 테스트라 한다.

8. 책임 분리 : 모든 코드를 테스트 해야하는 문제를 해결하기 위해, 한 클래스에 너무 많은 책임을
              부여하지 않고 단 하나의 책임만 수행하도록 해 변경 사유가 될 수 있는 것을
              하나로 만드는 것



<산탄총 수술(shotgun surgery)>
9. 하나의 책임이 여러 개의 클래스들로 분산되어 있는 경우에도 단일 책임 원칙에 입각해 설계를
   변경해야 하는 경우

10. 클래스 하나하나를 모두 변경하지 않으면 프로그램이 정상적으로 동작하지 않고 에러가 발생한다.

11. 하나의 책임이 여러 개의 클래스로 분리되어 있는 대표적인 예
    (횡단 관심 cross-cutting concern)
    1) 로깅
    2) 보안
    3) 트랜잭션

    ex) 특정 메서드를 실행할 때마다 실행 로그를 데이터베이스에 저장하는 경우
        -> 데이터베이스가 아니라 파일로 저장하는 식으로 변경이 일어난다면,
           로그 기능이 삽입된 메서드를 전부 찾아서 바꿔줘야 한다.



<관심지향 프로그래밍과 횡단 관심 문제>
12. 횡단 관심 문제를 해결하는 방법 : 관심지향 프로그래밍(Aspect-Oriented Programming, AOP) 기법
  1) 조인포인트 (JoinPoint)
     - 애플리케이션 실행 중의 특정한 지점을 의미
     - 전형적인 조인포인트의 예로는 '메서드 호출', '메서드 실행 자체', '클래스 초기화', '객체 생성 시점' 등이 있다.
     - 조인포인트는 AOP의 핵심 개념이며 애플리케이션의 어떤 지점에서 AOP를 사용해 추가적인 로직을 삽입할지를 정의한다.

  2) 어드바이스 (Advice)
     - 특정 조인포인트에 실행하는 코드를 의미
     - 조인포인트 이전에 실행하는 Before Advice와 이후에 실행하는 After Advice를 비롯한 여러 종류의 어드바이스가 있다.

  3) 포인트컷 (PointCut)
     - 여러 조인포인트의 집합체로, 언제 어드바이스를 실행할지 정의할 때 사용한다.
     - 포인트컷을 만들면 애플리케이션 구성 요소에 어드바이스를 어떻게 적용할지 상세하게 제어할 수 있다.
     - 가장 일반적인 포인트컷은 특정 클래스에 있는 모든 메서드 호출로 구성된다.
     - 종종 어드바이스 실행 지점을 좀 더 다양하게 제어할 필요가 있을 때는 복잡한 형태로 포인트컷을 구성할 수도 있다.

  4) 애스펙트 (Aspect)
     - 어드바이스와 포인트컷을 조합한 조합물이다.
     - 애플리케이션이 가져야 할 로직과 그것을 실행해야 하는 지점을 정의한 것

  5) 위빙 (Weaving)
     - 애플리케이션 코드의 해당 지점에 Aspect를 실제로 주입하는 과정을 말한다.
     - 컴파일 시점 AOP 솔루션은 이 작업을 컴파일 시점에 하며 빌드 중에 별도의 과정을 거친다.
     - 실행 시점 AOP 솔루션은 실행 중에 동적으로 Weaving이 일어난다.